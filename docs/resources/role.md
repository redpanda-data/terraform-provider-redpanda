---
page_title: "redpanda_role Resource - terraform-provider-redpanda"
subcategory: ""
description: |-
  Redpanda Cloud RBAC role
---

# redpanda_role (Resource)

Redpanda Cloud RBAC role

Creates a role in Redpanda Cloud for role-based access control (RBAC). Assign roles to principals using the redpanda_role_assignment resource.

## Availability

RBAC is available for:
- ✅ BYOC (Bring Your Own Cloud) clusters
- ✅ Dedicated clusters
- ❌ Not available for Serverless clusters

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_api_url` (String) The cluster API URL. Changing this will prevent deletion of the resource on the existing cluster. It is generally a better idea to delete an existing resource and create a new one than to change this value unless you are planning to do state imports
- `name` (String) Name of the role, must be unique

### Optional

- `allow_deletion` (Boolean) Allows deletion of the role. If false, the role cannot be deleted and the resource will be removed from the state on destruction. Defaults to false.

### Read-Only

- `id` (String) The ID of this resource.

## Role Naming Best Practices

When choosing role names:
- Use **descriptive names** that clearly indicate purpose (`DataEngineers`, `ReadOnlyAnalysts`)
- **Align with responsibilities**: Reflect actual job functions and organizational structure
- **Prefer specificity**: Create specific roles rather than overly broad ones (`TopicReaders` vs `SuperUsers`)
- Roles cannot be renamed once created - choose names carefully

## Example Usage

```terraform
provider "redpanda" {}

resource "redpanda_resource_group" "example" {
  name = "example-resource-group"
}

resource "redpanda_network" "example" {
  name              = "example-network"
  resource_group_id = redpanda_resource_group.example.id
  cloud_provider    = "aws"
  region            = "us-west-2"
  cluster_type      = "dedicated"
  cidr_block        = "10.0.0.0/20"
}

resource "redpanda_cluster" "example" {
  name              = "example-cluster"
  resource_group_id = redpanda_resource_group.example.id
  network_id        = redpanda_network.example.id
  cloud_provider    = "aws"
  region            = "us-west-2"
  cluster_type      = "dedicated"
  connection_type   = "public"
  throughput_tier   = "tier-1-aws"
  zones             = ["us-west-2a", "us-west-2b", "us-west-2c"]
}

resource "redpanda_role" "example" {
  name            = "developer"
  cluster_api_url = redpanda_cluster.example.cluster_api_url
  allow_deletion  = true
}

# Optional: Assign the role to a user
resource "redpanda_user" "example" {
  name            = "example-user"
  password        = "secure-password-123"
  mechanism       = "scram-sha-256"
  cluster_api_url = redpanda_cluster.example.cluster_api_url
  allow_deletion  = true
}

resource "redpanda_role_assignment" "example" {
  role_name       = redpanda_role.example.name
  principal       = redpanda_user.example.name
  cluster_api_url = redpanda_cluster.example.cluster_api_url
}
```

## Usage with Role Assignment

Roles created with this resource can be assigned to users using the `redpanda_role_assignment` resource:

```terraform
resource "redpanda_role" "developer" {
  name            = "developer"
  cluster_api_url = var.cluster_api_url
  allow_deletion  = true
}

resource "redpanda_role_assignment" "dev_assignment" {
  role_name       = redpanda_role.developer.name
  principal       = "john.doe"
  cluster_api_url = var.cluster_api_url
}
```

## Deletion Protection

By default, `allow_deletion` is set to `false` to prevent accidental deletion of roles. Set this to `true` if you want Terraform to be able to delete the role when the resource is destroyed.

If `allow_deletion` is `false` and the resource is destroyed, the role will remain in Redpanda but will be removed from Terraform state.

## Important: Deletion Behavior

When a role is deleted (with `allow_deletion = true`):
- **All ACLs assigned to the role are automatically deleted**
- **All user assignments to the role are automatically removed**
- **This operation is irreversible**

Consider the impact on users and permissions before deleting roles. It's recommended to review all role assignments and associated ACLs before enabling deletion.

## Import

```shell
terraform import redpanda_role.example roleName,clusterId
```

Where `clusterId` is the ID of the cluster in Redpanda Cloud.

## API Reference

For more information, see:
- [Redpanda RBAC in Data Plane](https://docs.redpanda.com/redpanda-cloud/security/authorization/rbac/rbac_dp/)
- [Redpanda Cloud Data Plane API](https://docs.redpanda.com/api/cloud-dataplane-api/)
