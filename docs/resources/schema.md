---
page_title: "redpanda_schema Resource - terraform-provider-redpanda"
subcategory: ""
description: |-
  Schema represents a Schema Registry schema
---

# redpanda_schema (Resource)

Schema represents a Schema Registry schema

Creates a schema in the Redpanda Schema Registry.

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_id` (String) The ID of the cluster where the schema is stored.
- `password` (String, Sensitive) The SASL password for Schema Registry authentication.
- `schema` (String) The schema definition in JSON format.
- `subject` (String) The subject name for the schema.
- `username` (String) The SASL username for Schema Registry authentication.

### Optional

- `allow_deletion` (Boolean) When enabled, prevents the resource from being deleted if the cluster is unreachable. When disabled (default), the resource will be removed from state without attempting deletion when the cluster is unreachable.
- `compatibility` (String) The compatibility level for schema evolution (BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE, FULL, FULL_TRANSITIVE, NONE). Defaults to BACKWARD.
- `references` (Attributes List) List of schema references. (see [below for nested schema](#nestedatt--references))
- `schema_type` (String) The type of schema (AVRO, JSON, PROTOBUF).

### Read-Only

- `id` (Number) The unique identifier for the schema.
- `version` (Number) The version of the schema.

<a id="nestedatt--references"></a>
### Nested Schema for `references`

Required:

- `name` (String) The name of the referenced schema.
- `subject` (String) The subject of the referenced schema.
- `version` (Number) The version of the referenced schema.

## Example Usage

```terraform
provider "redpanda" {}

resource "redpanda_resource_group" "example" {
  name = "example-resource-group"
}

resource "redpanda_network" "example" {
  name              = "example-network"
  resource_group_id = redpanda_resource_group.example.id
  cloud_provider    = "aws"
  region            = "us-west-2"
  cluster_type      = "dedicated"
  cidr_block        = "10.0.0.0/20"
}

resource "redpanda_cluster" "example" {
  name              = "example-cluster"
  resource_group_id = redpanda_resource_group.example.id
  network_id        = redpanda_network.example.id
  cloud_provider    = "aws"
  region            = "us-west-2"
  cluster_type      = "dedicated"
  connection_type   = "public"
  throughput_tier   = "tier-1-aws"
  zones             = ["us-west-2a", "us-west-2b", "us-west-2c"]
}

resource "redpanda_user" "example" {
  name            = "schema-user"
  password        = "secure-password-123"
  mechanism       = "scram-sha-256"
  cluster_api_url = redpanda_cluster.example.cluster_api_url
  allow_deletion  = true
}

resource "redpanda_schema" "example" {
  cluster_id  = redpanda_cluster.example.id
  subject     = "user-value"
  schema_type = "AVRO"
  schema = jsonencode({
    type = "record"
    name = "User"
    fields = [
      {
        name = "id"
        type = "long"
      },
      {
        name = "username"
        type = "string"
      },
      {
        name = "email"
        type = "string"
      }
    ]
  })
  username = redpanda_user.example.name
  password = "secure-password-123"
}
```

## Schema Evolution and Compatibility

Redpanda Schema Registry supports schema evolution with different compatibility levels:

- `BACKWARD` (default): New schema can read data written with the previous schema
- `FORWARD`: Previous schema can read data written with the new schema  
- `FULL`: Both backward and forward compatibility
- `BACKWARD_TRANSITIVE`: Backward compatibility with all previous versions
- `FORWARD_TRANSITIVE`: Forward compatibility with all previous versions
- `FULL_TRANSITIVE`: Both backward and forward compatibility with all previous versions
- `NONE`: No compatibility checking

For more details, see the [Redpanda Schema Registry API documentation](https://docs.redpanda.com/current/manage/schema-reg/schema-reg-api/).

## Schema References

Schemas can reference other schemas to build complex data models. When using references, ensure the referenced schemas are created first.

## Security Considerations

We recommend storing Schema Registry credentials in environment variables or a secret store:

- `REDPANDA_SR_USERNAME` for the username
- `REDPANDA_SR_PASSWORD` for the password

## Import

Schemas can be imported using a colon-separated string with the following format:

```
cluster_id:subject:version:username:password
```

Example imports:

```shell
# Import a schema with version 1
terraform import redpanda_schema.example "cluster-123:user-value:1:myuser:mypassword"

# Import a schema with a complex subject name
terraform import redpanda_schema.product "cluster-456:com.example.Product-v2:5:admin:secret123"

# Import schema version 0
terraform import redpanda_schema.initial "cluster-789:test-subject:0:svc_account:p@ssw0rd"
```

**Note:** Credentials (username and password) are required for import to authenticate with the Schema Registry and verify the schema exists

## API Reference

For more information, see the [Redpanda Schema Registry API documentation](https://docs.redpanda.com/current/manage/schema-reg/schema-reg-api/) and the [Redpanda Cloud Data Plane API documentation](https://docs.redpanda.com/api/cloud-dataplane-api/).