version: '3'

tasks:
  default:
    desc: "Generate provider documentation"
    deps:
      - :tools:install:tfplugindocs
    cmds:
      - echo "Generating provider documentation..."
      - |
        if [ "$BUILDKITE" = "true" ]; then
          echo "Running in BuildKite environment with buildvcs=false"
          GOFLAGS="-buildvcs=false" {{.PATH_PREFIX}} tfplugindocs generate --provider-name terraform-provider-redpanda
        else
          echo "Running in local environment"
          {{.PATH_PREFIX}} tfplugindocs generate --provider-name terraform-provider-redpanda
        fi
      - echo "Provider documentation generated successfully"
