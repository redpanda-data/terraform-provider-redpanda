version: '3'

vars:
  MOCKS_DIR: "redpanda/mocks"

tasks:
  default:
    desc: "Generate and clean mocks (combines clean and generate)"
    deps: [clean, generate]

  clean:
    desc: "Clean generated mocks"
    cmds:
      - echo "Cleaning generated mocks..."
      - rm -f {{.MOCKS_DIR}}/mock_*.go
      - echo "Mocks cleaned successfully"

  generate:
    desc: "Generate all mocks"
    deps:
      - :tools:install:mockgen
    dir: "{{.MOCKS_DIR}}"
    cmds:
      - echo "Generating mocks..."
      - "{{.PATH_PREFIX}} go generate"
      - echo "Mocks generated successfully"
